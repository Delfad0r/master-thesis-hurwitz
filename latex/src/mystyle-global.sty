\ProvidesPackage{mystyle-global}


% Groups
\NewDocumentCommand{\symgroup}{o}{%
\mathfrak{S}\IfValueT{#1}{_{#1}}
}
\NewDocumentCommand{\altgroup}{o}{%
\mathfrak{A}\IfValueT{#1}{_{#1}}
}
\NewDocumentCommand{\op}{m}{#1^{\operatorname{op}}}
\NewDocumentCommand{\angled}{m}{\left\langle#1\right\rangle}
\NewDocumentCommand{\subgroup}{}{\le}
\DeclareMathOperator{\id}{id}
\NewDocumentCommand{\stab}{mm}{\operatorname{Stab}_{#1}(#2)}
\ExplSyntaxOn
\NewDocumentCommand{\cycle}{m}{%
\clist_set:Nn\l_tmpa_clist{#1}
(\clist_use:Nn\l_tmpa_clist{,})
}
\ExplSyntaxOff


% Partitions
\NewDocumentCommand{\Partitions}{m}{\Pi(#1)}
\NewDocumentCommand{\SPartitions}{m}{\Pi^2(#1)}
\NewDocumentCommand{\len}{m}{\ell(#1)}


% Surfaces
\NewDocumentCommand{\tSigma}{}{\wtilde{\Sigma}}
\NewDocumentCommand{\hSigma}{}{\what{\Sigma}}
\NewDocumentCommand{\RP}{o}{%
\mathbb{R}\mathbb{P}\IfValueT{#1}{^{#1}}
}
\NewDocumentCommand{\surf}{m}{\Sigma_{#1}}
\NewDocumentCommand{\nosurf}{m}{N_{#1}}
\NewDocumentCommand{\sphere}{}{\mathbb{S}}

\NewDocumentCommand{\cat}{}{\ast}
\NewDocumentCommand{\invpath}{m}{\iota(#1)}
\NewDocumentCommand{\interior}{m}{\accentset{\circ}{#1}}

\setbox1=\hbox{$\bullet$}
\newlength{\holedbulletraise}
\setlength{\holedbulletraise}{\dimexpr0.25\ht1}
\NewDocumentCommand{\holed}{m}{#1^{\raisebox{\holedbulletraise}{\scalebox{0.5}{$\bullet$}}}}


% Covering maps
\NewDocumentCommand{\lift}{mm}{\operatorname{lift}(#1,#2)}
\NewDocumentCommand{\mon}{}{\bullet}
\NewDocumentCommand{\Mon}{}{\mathfrak{m}}


% Combinatorial data
\NewDocumentCommand{\DD}{}{\mathcal{D}}
\NewDocumentCommand{\datum}{mmm}{(#1;#2;#3)}
\NewDocumentCommand{\cmove}{}{\mathbin{\tikz[baseline=-.3em]\draw[-{Latex[scale=1.2]},decorate,decoration={snake,amplitude=.5mm,segment length=2mm,post length=1.6mm}] (0,0) -- (.83,0);}}


% Sets
\NewDocumentCommand{\RR}{}{\mathbb{R}}
\NewDocumentCommand{\CC}{}{\mathbb{C}}
\NewDocumentCommand{\ZZ}{}{\mathbb{Z}}
\NewDocumentCommand{\QQ}{}{\mathbb{Q}}
\NewDocumentCommand{\FF}{}{\mathbb{F}}
\NewDocumentCommand{\subs}{}{\subseteq}
\NewDocumentCommand{\card}{m}{\lvert #1\rvert}
\let\setminus\smallsetminus


% Relations
\NewDocumentCommand{\iso}{}{\simeq}


% Functions
\NewDocumentCommand{\map}{mmm}{#1\colon\umap{#2}{#3}}
\NewDocumentCommand{\umap}{mm}{%
#1\mathchoice{\longrightarrow}{\to}{\to}{\to}#2
}
\NewDocumentCommand{\Map}{mmmmm}{%
\begin{alignedat}{2}
#1\colon&&#2&\longrightarrow#3\\
&&#4&\longmapsto#5
\end{alignedat}
}


% Dessins d'enfant
\NewDocumentCommand{\dessin}{}{dessin d'enfant}
\NewDocumentCommand{\Dessin}{}{Dessin d'enfant}
\NewDocumentCommand{\dessins}{}{dessins d'enfant}
\NewDocumentCommand{\Dessins}{}{Dessins d'enfant}


% C++
\NewDocumentCommand{\Cpp}{}{{C\nolinebreak[4]\hspace{-.05em}\raisebox{.4ex}{\tiny\bf ++}}}


% Other aliases
\let\phi\varphi
%\NewDocumentCommand{\wtilde}{m}{\vphantom{#1}\smash[t]{\widetilde{#1}}}
\makeatletter %https://tex.stackexchange.com/questions/3682/how-do-i-lower-the-widetilde-accent-i-e-move-it-closer-to-the-variable
\NewDocumentCommand{\wtilde}{m}{\mathpalette\wtildehelper{#1}}
\NewDocumentCommand{\wtildehelper}{mm}{%
    \hbox{\dimen@\accentfontxheight#1%
        \accentfontxheight#11.1\dimen@
        $\m@th#1\widetilde{#2}$%
        \accentfontxheight#1\dimen@
    }%
}
\NewDocumentCommand{\what}{m}{\mathpalette\whathelper{#1}}
\NewDocumentCommand{\whathelper}{mm}{%
    \hbox{\dimen@\accentfontxheight#1%
        \accentfontxheight#11.1\dimen@
        $\m@th#1\widehat{#2}$%
        \accentfontxheight#1\dimen@
    }%
}
\NewDocumentCommand{\accentfontxheight}{m}{%
    \fontdimen5\ifx#1\displaystyle
        \textfont
    \else\ifx#1\textstyle
        \textfont
    \else\ifx#1\scriptstyle
        \scriptfont
    \else
        \scriptscriptfont
    \fi\fi\fi3
}
\makeatother


