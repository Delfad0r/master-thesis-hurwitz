\ProvidesPackage{mystyle-thesis}


% Todos
\usepackage{todonotes}
\usepackage{comment}
\usepackage{lipsum}


% Page layout
\usepackage[a4paper]{geometry}


% Typography
\usepackage{microtype}
\usepackage{numprint}


% LaTeX programming
\usepackage{etoolbox}
\usepackage{xparse}


% AMS packages
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}


% Other math packages
\usepackage{mathtools}


% Cool symbols
\usepackage{accents}
\usepackage[fixed]{fontawesome5}


% Unbreakable dashes
\usepackage[shortcuts]{extdash}

% References
\usepackage{hyperref}
\hypersetup{colorlinks,citecolor=black,filecolor=black,linkcolor=black,urlcolor=black}
\usepackage[noabbrev,capitalize]{cleveref}
\NewDocumentCommand{\RH}{}{\hyperref[hurwitz:th:riemann-hurwitz-formula]{Riemann-Hurwitz}}


% Theorems
\usepackage{amsthm}
\usepackage{thmtools}
\declaretheorem[numberwithin=chapter]{theorem}
\declaretheorem[numberlike=theorem]{lemma}
\declaretheorem[numberlike=theorem]{corollary}
\declaretheorem[numberlike=theorem]{proposition}
\declaretheorem[style=definition,numberwithin=chapter]{definition}
\declaretheorem[style=remark,numberwithin=chapter]{remark}
\declaretheorem[numbered=no,name={Conjecture}]{conjecture*}
\declaretheorem[numbered=no,name={Hurwitz existence problem},style=definition]{hurwitz-existence-problem*}
\declaretheorem[numbered=no,name={Prime-degree conjecture}]{prime-degree-conjecture*}
\declaretheorem[numbered=no,name={Solution of the Hurwitz existence problem for $\ell(\pi_n)=2$}]{solution-hurwitz*}

\makeatletter
\NewDocumentCommand{\NewCombinatorialMoveType}{m}{
\declaretheorem[name={Combinatorial move},refname={Combinatorial move,Combinatorial moves},Refname={Combinatorial move,Combinatorial moves}]{combinatorialmove#1}
\expandafter\renewcommand\csname thecombinatorialmove#1\endcsname{\uppercase{#1}.\arabic{combinatorialmove#1}}
}
\makeatother
\NewCombinatorialMoveType{a}
\NewCombinatorialMoveType{b}
\NewCombinatorialMoveType{c}


% Appendices
\usepackage{appendix}


% Floats
\usepackage{float}
\floatstyle{plain}


% Tables
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{ltablex}
\usepackage{pgfplotstable}
\pgfplotsset{compat=1.17}
\usepackage{makecell}
\usepackage{siunitx}
\newcolumntype{Y}{S[table-format=3.0]}


% TikZ
\usepackage{tikz}
\usepackage{tikz-3dplot}
\usetikzlibrary{decorations.pathmorphing}
\usetikzlibrary{external}
\tikzexternalize[prefix=figures/]
\tikzset{external/only named=true}


% Boxes
\usepackage[many]{tcolorbox}
\usepackage{varwidth}
\usepackage{footnote}
\tikzset{sideline line style/.style={violet!50,line width=.5pt,rounded corners=2.5pt}}
\newtcolorbox{sideline}[2][]{
title={#2},
enhanced,breakable,blanker,
coltitle=violet,fonttitle=\bfseries,
detach title,
before upper={\tikz[baseline=0pt,remember picture] \node[draw=violet,line width=.8pt,rounded corners=2.5pt,fill=white,text height={height("I")},text depth={depth("y")},draw,anchor=base] (sideline title node){\tcbtitle};\vspace{.2em}\hspace{1em}},
left=6pt,
remember,
overlay unbroken={\draw[sideline line style] (sideline title node.west) -| ([yshift=-.2em]frame.south west) -- ++ (.4em,0);},
overlay first={\draw[sideline line style] (sideline title node.west) -| (frame.south west);},
overlay middle={\draw[sideline line style] (frame.north west) -- (frame.south west);},
overlay last={\draw[sideline line style] (frame.north west) |- ([shift={(.4em,-.2em)}]frame.south west);},
#1
}
\BeforeBeginEnvironment{sideline}{\savenotes}
\AfterEndEnvironment{sideline}{\spewnotes}

\NewDocumentEnvironment{twoimplications}{}{%
\def\leftimplication{\def\rightimplication{\end{sideline}\begin{sideline}{$\boldsymbol{\Rightarrow}$}}\begin{sideline}{$\boldsymbol{\Leftarrow}$}}
\def\rightimplication{\def\leftimplication{\end{sideline}\begin{sideline}{$\boldsymbol{\Leftarrow}$}}\begin{sideline}{$\boldsymbol{\Rightarrow}$}}
}{\end{sideline}}



% Diagrams
\usepackage{tikz-cd}
\tikzcdset{diagrams={row sep=large,column sep=large}}
\NewDocumentEnvironment{diagram}{O{}}{\tikzexternaldisable\begin{equation*}\begin{tikzcd}[#1]}{\end{tikzcd}\end{equation*}\tikzexternalenable\ignorespacesafterend}


% Lists
\usepackage[short labels]{enumitem}
\NewDocumentCommand{\tikzenumlabel}{m}{\tikz[baseline=0pt]\node[anchor=base,fill=violet,text=white,text height={height("1")},font={\scriptsize\normalfont},minimum width={height("1")+depth("1")+3pt},rounded corners=3pt,inner sep=1.5pt] {\textbf{#1}};}
\newlist{enumarabic}{enumerate}{2}
\setlist[enumarabic]{
itemsep=0.2em,
topsep=0.5em,
labelsep=8pt,
label=\protect\tikzenumlabel{\arabic*}
}
\newlist{enumroman}{enumerate}{2}
\setlist[enumroman]{
itemsep=0.2em,
topsep=0.5em,
labelsep=8pt,
label=\protect\tikzenumlabel{\roman*}
}
\setlist[itemize]{
label=\raisebox{0.2\height}{\scalebox{0.6}{\textcolor{violet}{\faChevronCircleRight}}},
itemsep=0.2em,
topsep=0.5em,
}
\NewDocumentEnvironment{assumptions}{}{\begin{itemize}}{\end{itemize}}


% Bibliography
\usepackage[doi=false,isbn=false,url=false]{biblatex}
\addbibresource{bibliography.bib}
\NewDocumentCommand{\resultcite}{mmm}{\cite[\MakeUppercase #1~#2]{#3}}
