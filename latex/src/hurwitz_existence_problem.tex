
\chapter{Hurwitz existence problem}

\section{Branched coverings of surfaces}

According to standard terminology, a \emph{surface} is simply a topological $2$-manifold. We will, however, only be concerned with compact, connected surfaces without boundary. For the sake of conciseness, unless otherwise stated, we will always implicitly assume that the surfaces we mention have these properties.

Orientable and non-orientable surfaces are completely classified by the following structure theorem (see \resultcite{theorem}{12.1}{munkres}).
\begin{itemize}
\item An orientable surface is (homeomorphic to) a connected sum of $g\ge 0$ tori. We call such a connected sum a \emph{surface of genus $g$}, and we denote it by $\surf{g}$. By definition, we say that $\surf{0}$ is the $2$-sphere $\sphere{}$; this is consistent with the formula $\chi(\surf{g})=2-2g$ for the Euler characteristic.
\item A non-orientable surface is (homeomorphic to) a connected sum of $g\ge 1$ real projective planes. We denote such a connected sum by $\nosurf{g}$. The Euler characteristic for a non-orientable surfaces is given by $\chi(\nosurf{g})=2-g$.
\end{itemize}


Loosely speaking, given two surfaces $\Sigma$, $\tSigma$, a \emph{covering map} between them is a continuous function $\map{f}{\tSigma}{\Sigma}$ which is locally modeled on the identity function $\umap{\RR^2}{\RR^2}$. Sometimes, however, the notion of covering map can be too restrictive. Consider, for instance, the sphere $\sphere{}$: being simply connected, it does not admit any non-trivial coverings. However, every (non-constant) homolorphic function $\umap{\sphere{}}{\sphere{}}$ is \emph{almost} a covering map, in the sense that it is locally modeled on the identity $\umap{\CC}{\CC}$, except for a finite number of \emph{branching points}, where it looks like the map
\[
\Map{F_k}{\CC}{\CC}{\xi}{\xi^k}
\]
for some $k\ge 2$. In fact, it turns out that every (non-constant) holomorphic function between two Riemann surfaces has this remarkable property (see \resultcite{section}{3.2}{szamuely}). This motivates the following definition.

\begin{definition}
Let $\Sigma,\tSigma$ be two surfaces. A continuous function $\map{f}{\tSigma}{\Sigma}$ is a \emph{branched covering map} (or simply a \emph{branched covering}) if the following property holds: for every $x\in\Sigma$, $\wtilde{x}\in f^{-1}(x)$ there exist a positive integer $k$, open neighborhoods $U,\wtilde{U}$ of $x,\wtilde{x}$ respectively, and homeomorphisms $\map{\phi}{U}{\CC}$, $\map{\wtilde{\phi}}{\wtilde{U}}{\CC}$ such that $\phi(x)=0$, $\wtilde{\phi}(\wtilde{x})=0$, $f(\wtilde{U})=U$ and the diagram
\begin{diagram}
\wtilde{U}\rar{f}\dar{\wtilde{\phi}}&U\dar{\phi}\\
\CC\rar{F_k}&\CC
\end{diagram}
commutes ($F_k$ is the map defined above). We say that $\wtilde{U}$ is a \emph{trivializing neighborhood} of $\wtilde{x}$.
\end{definition}

More informally, we can say that a branched covering is a continuous function between surfaces which is locally modeled on the complex map $\xi\mapsto \xi^k$, where $k\ge 1$ depends on the point. Note that, for each point $\wtilde{x}\in\tSigma$, the integer $k$ is well-defined, independently of the charts $\phi$ and $\wtilde{\phi}$: using the notation from the definition, we have that $k$ is equal to the cardinality of $f^{-1}(y)\cap\wtilde{U}$, where $y$ is any point in $U\setminus\{x\}$. We call this integer the \emph{local degree} of $\wtilde{x}$; to emphasize the dependence on $\wtilde{x}$, we will denote it by $k(\wtilde{x})$. 

\begin{center}
\tikzsetnextfilename{branched-covering-local-model}
\tdplotsetmaincoords{65}{-30}
\begin{tikzpicture}[tdplot_main_coords,x={(2,0,0)},y={(0,2,0)},z={(0,0,2)}]
\def\a{30};
\foreach \i in {1,2} {
\coordinate (y-\i) at ({sin(\a)*.7},{-cos(\a)*.7},{(\a/360+\i-2)*.7});
}
\coordinate (y) at ({sin(\a)*.7},{-cos(\a)*.7},-2.5);

\begin{scope}[shift={(0,0,-2.5)}]
\fill[disk 1] circle (1);
\foreach \i in {.1,.2,...,.9} { \draw[gray!80,line width=.1] circle (\i); }
\foreach \i in {0,...,39} {\draw[gray!80,line width=.1] (0,0) -- ({\i*360/40}:1); }
\draw circle (1);
\fill[black] circle (1pt) node[below left] {$x$};;

\fill[black] (y) circle (1pt) node[right=2pt] {$y$};
\end{scope}

\draw[violet,-{Latex[]}] (0,0,-.1) -- (0,0,-2.4) node[midway,left=2pt] {$f$};
\draw[violet,-{Latex[]}] ([shift={(0,0,-.1)}]y-1) -- ([shift={(0,0,.1)}]y);

\xdef\firsttime{1}
\path[decorate,decoration={show path construction,curveto code={
\filldraw[line width=.1pt,fill=disk 1,fill opacity=.9,draw=gray!80] (0,0,0) -- (\tikzinputsegmentfirst) -- (\tikzinputsegmentlast) -- cycle;
\draw (\tikzinputsegmentfirst) .. controls (\tikzinputsegmentsupporta) and (\tikzinputsegmentsupportb) .. (\tikzinputsegmentlast);
\foreach \i in {.1,.2,...,.9} {
	\draw[line width=.1,gray!80] ($\i*(\tikzinputsegmentfirst)$) .. controls ($\i*(\tikzinputsegmentsupporta)$) and ($\i*(\tikzinputsegmentsupportb)$) .. ($\i*(\tikzinputsegmentlast)$);
}
\ifnum\firsttime=1\xdef\firsttime{0}
	\draw[teal] (0,0,0) -- (\tikzinputsegmentfirst);
\fi}}] plot[smooth,samples=81,variable=\t,domain=-360:360] ({sin(\t)},{-cos(\t)},{\t/360});
\draw[teal] (0,0,0) -- (0,-1,1);

\def\a{30};
\foreach \i in {1,2} {
\fill[black] (y-\i) circle (1pt) node[above] {$\wtilde{y}_\i$};
}
\fill[black] (0,0,0) circle (1pt) node[below] {$\wtilde{x}$};
\end{tikzpicture}
\end{center}

A point $\wtilde{x}\in\tSigma$ is called a \emph{branching point} if $k(\wtilde{x})>1$; in other words, if $f$ is \emph{not} a local homeomorphism in a neighborhood of $\wtilde{x}$. We also say that a point $x\in\Sigma$ is a \emph{branching point} if $f^{-1}(x)$ contains at least one branching point; usually, no ambiguity will arise as to which kind of branching point we are referring to.

It is not hard to see that branching points are quite rare. If $\wtilde{x}\in\tSigma$ is a branching point, then (using again the notation from the definition) every other point in $\wtilde{U}$ is not a branching point; by compactness, it follows that the set of branching points in $\tSigma$ is finite. As a consequence, the set of branching points in $\Sigma$ is finite as well.

Given a branched covering $\map{f}{\tSigma}{\Sigma}$, we denote by $\holed{\Sigma}$ the subspace of $\Sigma$ containing all the non-branching points; since the set of branching points is finite, $\holed{\Sigma}$ is a non-compact connected surface with finitely many punctures. We also set $\holed{\tSigma}=f^{-1}(\holed{\Sigma})$, and we denote by $\holed{f}$ the restriction of $f$ to $\holed{\tSigma}$. By construction, $\map{\holed{f}}{\holed{\tSigma}}{\holed{\Sigma}}$ is a covering map and, as such, has a well-defined degree $d$ (the number of preimages of an arbitrary point); we call this integer the \emph{degree} of the branched covering $f$. The following proposition shows that the notion of degree extends nicely to branching points.

\begin{proposition}\label{hurwitz:th:sum-of-preimage-degrees}
Let $\map{f}{\tSigma}{\Sigma}$ be a branched covering of degree $d$. Then for every point $x\in\Sigma$ we have that the set $f^{-1}(x)$ is finite and
\[
\sum_{\wtilde{x}\in f^{-1}(x)}k(\wtilde{x})=d.
\]
\end{proposition}
\begin{proof}
If $x$ is not a branching point, the conclusion follows immediately, since $x$ has exactly $d$ preimages, all of which have local degree $k$ equal to $1$. Assume now that $x$ is a branching point; it is clear from the definition that the set $f^{-1}(x)\subs\tSigma$ is discrete and, hence, finite. Let $f^{-1}(x)=\{\wtilde{x}_1,\ldots,\wtilde{x}_r\}$. Fix disjoint trivializing neighborhoods $\wtilde{U}_1,\ldots,\wtilde{U}_r$ of $\wtilde{x}_1,\ldots,\wtilde{x}_r$ respectively; a routine compactness argument shows that there exists an open neighborhood $U$ of $x$ such that $f^{-1}(U)\subs \wtilde{U}_1\cup\ldots\cup\wtilde{U}_r$. Fix a point $y\in U\setminus\{x\}$: it follows from the discussion above that $y$ is not a branching point and that $\card{f^{-1}(y)\cap\wtilde{U}_i}=k(\wtilde{x}_i)$ for every $1\le i\le r$. Since $\card{f^{-1}(y)}=d$, we immediately conclude that
\[
\sum_{i=1}^r k(\wtilde{x}_i)=\sum_{i=1}^r\card{f^{-1}(y)\cap\wtilde{U}_i}=\card{f^{-1}(y)}=d.\qedhere
\]
\end{proof}

\section{Branching data}

Let $\map{f}{\tSigma}{\Sigma}$ be a branched covering. For each point $x\in\Sigma$, as we have just seen in \cref{hurwitz:th:sum-of-preimage-degrees}, the sum $k(\wtilde{x}_1)+\ldots k(\wtilde{x}_r)$ of the local degrees of its preimages is equal to the degree $d$ of the branched covering. Since there is no natural ordering on the set $f^{-1}(x)$, the appropriate combinatorial object for representing the collection $k(\wtilde{x}_1),\ldots,k(\wtilde{x}_r)$ is a \emph{partition}.

\begin{definition}
Let $d$ be a positive integer. A \emph{partition} of $d$ is an unordered finite multiset $\pi=[k_1,\ldots,k_r]$, where $k_i>0$ is an integer for every $1\le i\le r$ and $k_1+\ldots+k_r=d$.
\end{definition}

Given a positive integer $d$, we denote the set of all partitions of $d$ by $\Partitions{d}$. If $\pi=[k_1,\ldots,k_r]$ is a partition of $d$, we call the integer $r$ the \emph{length} (or \emph{size}, or \emph{cardinality}) of $\pi$, and we denote it by $\len{\pi}$. We also say that the \emph{sum} of $\pi$, denoted by $\sum\pi$, is $k_1+\ldots+k_r$ or, in other words, $d$. Finally, we introduce a new quantity, the \emph{branching number} $v(\pi)=d-\len{\pi}$, whose purpose will soon become apparent.

For every point $x\in\Sigma$, if $f^{-1}(x)=\{\wtilde{x}_1,\ldots,\wtilde{x}_r\}$, we can define the \emph{associated partition} $\pi(x)=[k(\wtilde{x}_1),\ldots,k(\wtilde{x}_r)]\in\Partitions{d}$. For all non-branching points, the associated partition will simply be $[1,\ldots,1]$. On the contrary, if $x$ is a branching point, then $\pi(x)\neq[1,\ldots,1]$ (or, equivalently, $v(\pi(x))>0$).

\begin{definition}
Let $\map{f}{\tSigma}{\Sigma}$ be a branched covering of degree $d$. Let $x_1,\ldots,x_n\in\Sigma$ be the branching points of $f$. The \emph{branching datum} of $f$ is the tuple
\[
\DD(f)=\datum{\tSigma,\Sigma}{d}{\pi(x_1),\ldots,\pi(x_n)},
\]
well-defined up to a permutation of the branching points $x_1,\ldots,x_n$.
\end{definition}

Branching data are a way to extract some combinatorial information from branched coverings. Even though the exact location of the branching points (both in $\Sigma$ and in $\tSigma$) is not encoded in the branching datum, this piece of information is completely irrelevant, since surfaces are \emph{homogeneous}\footnote{By \emph{homogeneous}, we mean that, for each $n\ge 1$, the group of homeomorphisms of a surface $\Sigma$ acts transitively on the set of $n$-uples of pairwise distinct points $(y_1,\ldots,y_n)$.}. However, the reader should not be induced to believe that the combinatorial information provided by the branching datum is enough to fully reconstruct the topology of $f$. In fact, it turns out that this is not the case: there can be many inequivalent branched coverings sharing the same branching datum. See \cite{sarti} for an in-depth discussion of this topic.

This entire thesis is devoted to the problem of determining what values can actually be attained by $\DD(f)$ as $f$ ranges over all the possible branched covering maps. We start with a very general definition.

\begin{definition}
A \emph{combinatorial datum} is a tuple
\[
\DD=\datum{\tSigma,\Sigma}{d}{\pi_1,\ldots,\pi_n},
\]
where $\Sigma,\tSigma$ are surfaces, $d$ and $n$ are positive integers, and $\pi_1,\ldots,\pi_n$ are partitions of $d$ different from $[1,\ldots,1]$.
\end{definition}

Again, a combinatorial datum is defined up to a permutation of the partitions $\pi_1,\ldots,\pi_n$. In other words, we will consider two combinatorial data equal if they have the same partitions, irrespective of the ordering.

Technically, we could also allow combinatorial data to have $n=0$ partitions. However, data of this kind would correspond to standard covering maps, without any branching points. Since covering maps between surfaces are completely understood from a topological point of view (even in the non-empty boundary case, as shown in \cite{massey-covering}), we will always assume that $n\ge 1$. For the same reason, when we say ``branched covering'', we will be implicitly excluding the trivial cases of standard covering maps.

We say that a combinatorial datum $\DD$ is \emph{realizable} if $\DD=\DD(f)$ for some branched covering $\map{f}{\tSigma}{\Sigma}$, \emph{exceptional} otherwise. A first, naive guess could be that every combinatorial datum can be realized. However, it turns out that there are a few easy and general necessary conditions for a combinatorial datum to be associated to a branched covering. The first one, and arguably the most important, is known as the \emph{Riemann-Hurwitz formula}; we state it in the next proposition.

\begin{proposition}\label{hurwitz:th:riemann-hurwitz-formula}
Let $\map{f}{\tSigma}{\Sigma}$ be a branched covering, and let $\DD(f)=\datum{\tSigma,\Sigma}{d}{\pi_1,\ldots,\pi_n}$ be its branching datum. Then we have the equality
\[
d\chi(\Sigma)-\chi(\tSigma)=v(\pi_1)+\ldots+v(\pi_n).
\]
\end{proposition}
\begin{proof}
Using the same notation as above, consider the covering map $\map{\holed{f}}{\holed{\tSigma}}{\holed{\Sigma}}$. Since $\holed{f}$ has degree $d$, the Euler characteristics of $\holed{\Sigma}$ and $\holed{\tSigma}$ are related by the formula $d\chi(\holed{\Sigma})=\chi(\holed{\tSigma})$. Note that there are $n$ branching points in $\Sigma$, and the number of points in $\tSigma\setminus\holed{\tSigma}$ is $\len{\pi_1}+\ldots+\len{\pi_n}$; therefore
\begin{align*}
\chi(\holed{\Sigma})=\chi(\Sigma)-n,&&\chi(\holed{\tSigma})=\chi(\tSigma)-\len{\pi_1}-\ldots-\len{\pi_n}.
\end{align*}
As a consequence, we have that
\[
d\chi(\Sigma)-\chi(\tSigma)=d\chi(\holed{\Sigma})+dn-\chi(\holed{\tSigma})-\len{\pi_1}-\ldots-\len{\pi_n}=v(\pi_1)+\ldots+v(\pi_n).\qedhere
\]
\end{proof}

There are three more conditions that every branching datum must satisfy: two of them concern the orientability of $\Sigma$ and $\tSigma$, and the other one provides an additional constraint for the \emph{total branching number} $v(\pi_1)+\ldots+v(\pi_n)$; we group these four requirements in the following definition.

\begin{definition}\label{hurwitz:df:candidate-datum}
A combinatorial datum $\DD=\datum{\tSigma,\Sigma}{d}{\pi_1,\ldots,\pi_n}$ is a \emph{candidate datum} if it satisfies the following conditions:
\begin{enumerate}
\item\label{hurwitz:it:candidate-datum-def:1} $d\chi(\Sigma)-\chi(\tSigma)=v(\pi_1)+\ldots+v(\pi_n)$;
\item\label{hurwitz:it:candidate-datum-def:2} $v(\pi_1)+\ldots+v(\pi_n)$ is even;
\item\label{hurwitz:it:candidate-datum-def:3} if $\Sigma$ is orientable, then $\tSigma$ is orientable as well;
\item\label{hurwitz:it:candidate-datum-def:4} if $\Sigma$ is non-orientable and $\tSigma$ is orientable, then $d$ is even, and each $\pi_i$ can be written as $\pi'_i\cup\pi''_i$, where $\pi'_i$ and $\pi''_i$ are partitions of $d/2$.
\end{enumerate}
\end{definition}

\begin{remark}\label{hurwitz:rm:orientability-of-tsigma}
In \cref{hurwitz:th:candidate-datum-necessary-conditions}, we will show that conditions \ref{hurwitz:it:candidate-datum-def:1}--\ref{hurwitz:it:candidate-datum-def:4} are necessary for a combinatorial datum to be realizable (actually, the first condition was already proved in \cref{hurwitz:th:riemann-hurwitz-formula}). For now, let us focus on condition \ref{hurwitz:it:candidate-datum-def:3}, which is perhaps the most obvious one. If $\Sigma$ is orientable, then so is $\holed{\Sigma}$, since removing a finite number of points does not affect orientability. The non-compact surface $\holed{\tSigma}$, being a covering space of an orientable manifold, is itself orientable. Finally, this implies that $\tSigma$ is orientable as well.
\end{remark}

It would be natural to ask whether the necessary conditions we have enumerated are also sufficient for a candidate datum to be realizable. We will see in the following chapters that the answer is negative, and that, in general, determining the full list of exceptional data is remarkably difficult; we call this the \emph{Hurwitz existence problem}\footnote{The question originally posed by Hurwitz in \cite{hurwitz} was actually even harder: the task was counting \emph{how many} branched coverings (up to a suitable notion of isomorphism) realize a given candidate datum. We will, however, ignore this point of view, considering that the existence problem is hard enough as it is. The interested reader may find some relevant results on the \emph{Hurwitz enumeration problem} in \cite{hurwitz-counting-1,hurwitz-counting-2,hurwitz-counting-3,hurwitz-counting-4,hurwitz-counting-5}.}, and we state it in the following deliberately vague fashion.

\begin{hurwitz-existence-problem*}
Determine necessary and sufficient conditions for a candidate datum $\datum{\tSigma,\Sigma}{d}{\pi_1,\ldots,\pi_n}$ to be realizable.
\end{hurwitz-existence-problem*}

In the remainder of this thesis, we will try to address some instances of this problem. We will present a variety of techniques, which will provide us with a full solution for some classes of candidate data.


\section{Symmetric group and partitions}

The first approach we will describe is based on the monodromy action. Before describing this action and how it relates to branched coverings, we will recall a few elementary facts about permutations and partitions.

Given a set $X$, we denote by $\symgroup(X)$ the set of bijective functions $\umap{X}{X}$. The set $\symgroup(X)$ is naturally endowed with a group structure, where the product is given by the composition operator $(\circ)$; we call this group the \emph{symmetric group} of $X$. Elements of $\symgroup(X)$ are also called \emph{permutations}.

We will sometimes need to work in a setting where the product in $\symgroup(X)$ is reversed. Given a group $G$ with product $(\ast)$, we define the \emph{opposite group} $\op{G}$, which has the same underlying set as $G$, but the product $(\op{\ast})$ is defined as $g_1\op{\ast}g_2=g_2\ast g_1$.

If $d$ is a positive integer, we will employ the notation $\symgroup[d]$ as a shorthand for $\symgroup(\{1,\ldots,d\})$. Whenever $X$ is a finite (non-empty) set, we have an isomorphism $\symgroup(X)\iso\symgroup[d]$, where $d$ is the cardinality of $X$. We will therefore restrict out attentions to the groups $\symgroup[d]$, keeping in mind that everything we say also holds for symmetric groups of arbitrary finite sets.

Recall that every permutation $\alpha\in\symgroup[d]$ has a \emph{cycle decomposition} (that is, it can be written as a product of disjoint, possibly trivial cycles):
\[
\alpha=\cycle{x_{1,1},\ldots,x_{1,k_1}}\cycle{x_{2,1},\ldots,x_{2,k_2}}\cdots\cycle{x_{r,1},\ldots,x_{r,k_r}}.
\]
The natural action of (the subgroup generated by) $\alpha$ on the set $A=\{1,\ldots,d\}$ induces a decomposition $A=A_1\sqcup\ldots\sqcup A_r$ into orbits, where $A_i=\{x_{i,1},\ldots,x_{i,k_i}\}$. This decomposition, in turn, gives rise to a partition $\pi=[\card{A_1},\ldots,\card{A_r}]\in\Partitions{d}$. We say that $\alpha$ \emph{matches} the partition $\pi$, and we use the notation $[\alpha]$ to refer to the (unique) partition matched by $\alpha$. We also define the \emph{branching number} $v(\alpha)$ as the branching number of $[\alpha]$; note that $v(\alpha)=0$ if and only if $\alpha=\id\in\symgroup[d]$ is the trivial permutation.

It is well known that two permutations are conjugate if and only if they match the same partition. In other words, there is a natural bijection between conjugacy classes of $\symgroup[d]$ and the set of partitions $\Partitions{d}$.

We conclude this section with a very simple result relating the branching number of two permutations to the branching number of their product. Recall that every permutation has a well-defined \emph{sign}: \emph{even} permutations can only be written as a product of an even number of transpositions ($2$-cycles), while \emph{odd} permutations can only be written as a product of an odd number of transpositions. The \emph{alternating group} of order $d$ is the index-$2$ subgroup $\altgroup[d]\subgroup\symgroup[d]$ containing all the even permutations.

\begin{proposition}\label{hurwitz:th:branching-number-permutations-product}
Let $\alpha,\beta\in\symgroup[d]$ be permutations. Then $v(\alpha\beta)\equiv v(\alpha)+v(\beta)\pmod{2}$.
\end{proposition}
\begin{proof}
We show that $v(\alpha)$ is even if and only if $\alpha$ is even; the conclusion will then follow trivially. Fix a cycle decomposition
\[
\alpha=\cycle{x_{1,1},\ldots,x_{1,k_1}}\cycle{x_{2,1},\ldots,x_{2,k_2}}\cdots\cycle{x_{r,1},\ldots,x_{r,k_r}}.
\]
Since a $k$-cycle can be written as a product of $k-1$ transpositions, we have that $\alpha$ is the product of $d-r=v(\alpha)$ transpositions. This shows that $v(\alpha)$ is even if and only if $\alpha\in\altgroup[d]$, which concludes the proof.
\end{proof}


\section{Branched covering action of the fundamental group}

We now introduce the monodromy action in the general setting of topological spaces; we will assume that all the spaces we mention are locally path-connected and locally simply-connected. For a much more in-depth discussion of the monodromy action, and especially for a proof of \cref{hurwitz:th:covering-with-given-monodromy}, see \resultcite{section}{2.3}{szamuely} (but note that \citeauthor{szamuely}, unlike us, uses the right-to-left notation for path concatenation in the fundamental group).

Let $\map{f}{\wtilde{X}}{X}$ be a covering map between topological spaces, with $X$ path-connected. Fix a base-point $x_0\in X$, and let $\wtilde{x}_0\in\wtilde{X}$ be a point in $f^{-1}(x_0)$. Given a path $\map{\gamma}{[0,1]}{X}$ with $\gamma(0)=x_0$, denote by $\map{\lift{\gamma}{\wtilde{x}_0}}{[0,1]}{\wtilde{X}}$ the unique lift of $\gamma$ such that $\lift{\gamma}{\wtilde{x}_0}(0)=\wtilde{x}_0$. There is a very natural right action of the fundamental group $\pi_1(X,x_0)$ on the fiber $f^{-1}(x_0)$, defined by\footnote{Since the lifting operation is, in some sense, invariant up to homotopy, we will often use the same symbol ($\gamma$, in this case) to interchangeably represent a class in the fundamental group $\pi_1(X,x_0)$ and a representative of that class.}
\begin{align*}
\wtilde{x}\mon\gamma=\lift{\gamma}{\wtilde{x}}(1)&&\text{for $\wtilde{x}\in f^{-1}(x_0)$, $\gamma\in\pi_1(X,x_0)$.}
\end{align*}
We call this the \emph{monodromy action} of the covering map. It is easy to see that $\wtilde{X}$ is path-connected if and only if the monodromy action on $f^{-1}(x_0)$ is transitive.

There is a relation between monodromy and the fundamental group of $\wtilde{X}$. Fix a base-point $\wtilde{x}_0\in f^{-1}(x_0)\subs\wtilde{X}$. By elementary properties of covering spaces, we have that
\begin{align*}
f_*(\pi_1(\wtilde{X},\wtilde{x}_0))&=\{\gamma\in\pi_1(X,x_0):\lift{\gamma}{\wtilde{x}_0}=\wtilde{x}_0\}\\
&=\{\gamma\in\pi_1(X,x_0):\wtilde{x}_0\mon\gamma=\wtilde{x}_0\}\\
&=\stab{\pi_1(X,x_0)}{\wtilde{x}_0}.
\end{align*}

The monodromy action induces a group homomorphism $\map{\Mon}{\pi_1(X,x_0)}{\op{\symgroup(f^{-1}(x_0))}}$. If the covering map has a finite degree $d$, we will sometimes implicitly fix a bijection between $f^{-1}(x_0)$ and $\{1,\ldots,d\}$, and consider the homomorphism $\map{\Mon}{\pi_1(X,x_0)}{\op{\symgroup[d]}}$ instead; of course, this map is well-defined up to a conjugation in $\op{\symgroup[d]}$. The following existence theorem shows that every group homomorphism of this kind is induced by the monodromy action of some covering space.

\begin{theorem}\label{hurwitz:th:covering-with-given-monodromy}
Let $X$ be a path-connected topological space, $x_0\in X$ a point. Let $d$ be a positive integer, and let $\map{\psi}{\pi_1(X,x_0)}{\op{\symgroup[d]}}$ be a group homomorphism. Then there exists a covering map $\map{f}{\wtilde{X}}{X}$ with $\Mon=\psi$ (up to conjugation).
\end{theorem}

After introducing monodromy for general topological spaces, we turn our attention to the case of branched coverings of surfaces. Let $\map{f}{\tSigma}{\Sigma}$ be a branched covering. As we have seen, by removing the branching points from $\Sigma$, we get an associated covering map $\map{\holed{f}}{\holed{\tSigma}}{\holed{\Sigma}}$. Fix a base-point $x_0\in\holed{\Sigma}$, and let $x\in\Sigma$ be any point. There is a path $\gamma\in\pi_1(\holed{\Sigma},x_0)$ which ``goes around $x$ once''; to be more precise, we can construct it as follows. Pick a small neighborhood $U\subs\Sigma$ of $x$ which is homeomorphic to $\RR^2$ and does not contain any other branching points; here we can define a loop $\map{\beta}{[0,1]}{U\setminus\{x\}}$ that goes around $x$ once (we do not care about the orientation). Finally, pick a path $\map{\alpha}{[0,1]}{\holed{\Sigma}}$ connecting $x_0$ to $\beta(0)=\beta(1)$, and define $\gamma=\alpha\cat\beta\cat\invpath{\alpha}$, where $(\cat)$ is the concatenation of paths and $\invpath{\alpha}$ denotes the inverse path $\invpath{\alpha}(t)=\alpha(1-t)$. Of course, the homotopy class of $\gamma\in\pi_1(\holed{\Sigma},x_0)$ depends on $\alpha$ and even $\beta$ (we could have chosen $\invpath{\beta}$ instead); we will say that any path constructed with the procedure we have described is a \emph{loop around $x$} (based at $x_0$).
\begin{center}
\tikzsetnextfilename{monodromy-loop-around-point}
\begin{tikzpicture}[x={(5,0)},y={(0,5)}]
\begin{scope}[every path/.style={line width=\edgelinewidth}]
\draw[teal,postaction={decorate,decoration={markings,mark=between positions .02 and .98 step .5cm with {\arrowreversed{Stealth[scale=.75]}}}}] (.75,-0.02) to[out=180,in=-45,in looseness=.1] node[pos=.5,below,colored label=teal] {$\alpha$} (0,0) to[in=180,out=45,out looseness=.1] node[pos=.5,above] {$\invpath{\alpha}$} (.75,.02);
\draw[purple,postaction={decorate,decoration={markings,mark=between positions .02 and .98 step .5cm with {\arrowreversed{Stealth[scale=.75]}}}}] (.75,.02) to[out=0,in=180] (.9,.1) to[out=0,in=90] (1,0) node[right=2pt,colored label={purple}] {$\beta$} to[out=-90,in=0] (.9,-.1) to[out=180,in=0] (.75,-0.02);
\end{scope}
\foreach \p/\l in {{(0,0)}/{x_0},{(.9,0)}/x} {\fill \p circle (1pt); \node[above] at \p {$\l$};}
\end{tikzpicture}
\end{center}

We are finally ready to prove the connection between branched coverings and the monodromy of the associated covering map.
\begin{proposition}\label{hurwitz:th:monodromy-permutation-matches-partition}
Let $\map{f}{\tSigma}{\Sigma}$ be a branched covering of degree $d$, and let $\map{\holed{f}}{\holed{\tSigma}}{\holed{\Sigma}}$ be the associated covering map. Fix a base-point $x_0\in\holed{\Sigma}$ and a point $y\in\Sigma$. Let $\gamma$ be a loop around $y$. Consider the monodromy homomorphism $\map{\Mon}{\pi_1(\holed{\Sigma},x_0)}{\op{\symgroup(f^{-1}(x_0))}}$. Then the permutation $\Mon(\gamma)$ matches $\pi(y)$.
\end{proposition}
\begin{proof}
Let the preimages $\wtilde{y}_1,\ldots,\wtilde{y}_r$ of $y$ have local degrees $k_1,\ldots,k_r$. Fix disjoint trivializing neighborhoods $\wtilde{U}_1,\ldots,\wtilde{U}_r$ of $\wtilde{y}_1,\ldots,\wtilde{y}_r$ respectively. Let $U\subs\Sigma$ be an open neighborhood of $x$ which is homeomorphic to $\RR^2$ and such that $f^{-1}(U)\subs \wtilde{U}_1\cup\ldots\cup\wtilde{U}_r$. Since $\gamma$ is a loop around $y$, we can write $\gamma=\alpha\cat\beta\cat\invpath{\alpha}$ as described above. Up to homotopy, we can assume that $\beta(t)\in U$ for every $t\in[0,1]$. Let $z=\alpha(1)=\beta(0)=\beta(1)\in U$; note that every preimage of $z$ lies exactly in one $\wtilde{U}_l$. Finally, let $\wtilde{x}_1,\ldots,\wtilde{x}_d$ be the preimages of $x_0$. We will show that $\wtilde{x}_i$ and $\wtilde{x}_j$ belong to the same orbit of $\Mon(\gamma)$ if and only if $\lift{\alpha}{\wtilde{x}_i}(1)$ and $\lift{\alpha}{\wtilde{x}_j}(1)$ lie in the same $\wtilde{U}_l$. Since $f^{-1}(z)\cap \wtilde{U}_l$ has cardinality $k_l$ and $\pi(y)=[k_1,\ldots,k_r]$, this would complete the proof.

Let $\wtilde{x}_i\in f^{-1}(x_0)$, $\wtilde{z}_1=\lift{\alpha}{\wtilde{x}_i}(1)$. Let $l$ be the unique index such that $\wtilde{z}_1\in\wtilde{U}_l$. For each $m\ge 1$, inductively define $\wtilde{z}_{m+1}=\lift{\beta}{\wtilde{z}_m}(1)$. Since the support of $\beta$ lies entirely in $U$, we have that the support of $\lift{\beta}{\wtilde{z}_m}$ lies entirely in $\wtilde{U}_l$ and, therefore, $\wtilde{z}_{m+1}\in\wtilde{U}_l$ as well. Since $\wtilde{U}_l$ is a trivializing neighborhood of $\wtilde{y}_l$, which has local degree $k_l$, it is easy to see that the sequence $\wtilde{z}_1,\wtilde{z}_2,\ldots$ is periodic of period $k_l$, and that $f^{-1}(z)\cap\wtilde{U}_l=\{\wtilde{z}_1,\ldots\wtilde{z}_{k_l}\}$. It is also clear that
\[
\Mon(\gamma)(\wtilde{x}_i)=\lift{\invpath{\alpha}}{\wtilde{z}_2}(1)
\]
and, by induction, that
\begin{align*}
\Mon(\gamma)^s(\wtilde{x}_i)=\lift{\invpath{\alpha}}{\wtilde{z}_{s+1}}(1)&&\text{for every $s\ge 1$.}
\end{align*}
This shows that, if $\wtilde{x}_j=\Mon(\gamma)^s(\wtilde{x}_i)$, then $\lift{\alpha}{\wtilde{x}_j}(1)=\wtilde{z}_{s+1}\in\wtilde{U}_l$.

Conversely, assume that $\lift{\alpha}{\wtilde{x}_j}(1)\in\wtilde{U}_l$. This implies that $\lift{\alpha}{\wtilde{x}_j}(1)=\wtilde{z}_s$ for some $s\ge 1$. But then
\[
\wtilde{x}_j=\lift{\invpath{\alpha}}{\wtilde{z}_s}(1)=\Mon(\gamma)^{s-1}(\wtilde{x}_i),
\]
so $\wtilde{x}_i$ and $\wtilde{x}_j$ belong to the same orbit of $\Mon(\gamma)$.
\end{proof}

\section{Monodromy and realizability}

From \Cref{hurwitz:th:monodromy-permutation-matches-partition}, we can derive a group-theoretic criterion for the realizability of a given combinatorial datum.

\begin{proposition}\label{hurwitz:th:monodromy-realizability-general}
Let $\Sigma$ be a surface, $d\ge 1$ an integer, $\pi_1,\ldots,\pi_n\in\Partitions{d}$ partitions of $d$. Let $ x_1,\ldots x_n\in\Sigma$ be distinct points; define $\holed{\Sigma}=\Sigma\setminus\{x_1,\ldots,x_n\}$. Fix a base-point $x_0\in\holed{\Sigma}$ and loops $\gamma_1,\ldots,\gamma_n\in\pi_1(\holed{\Sigma},x_0)$ around $x_1,\ldots,x_n$ respectively. Then the following are equivalent.
\begin{enumerate}
\item There exist a surface $\tSigma$ and a branched covering $\map{f}{\tSigma}{\Sigma}$ with branching datum $\DD(f)=\datum{\tSigma,\Sigma}{d}{\pi_1,\ldots,\pi_n}$.
\item There exists a group homomorphism $\map{\psi}{\pi_1(\holed{\Sigma},x_0)}{\op{\symgroup[d]}}$ such that $\psi(\pi_1(\holed{\Sigma},x_0))\subgroup\op{\symgroup[d]}$ acts transitively on $\{1,\ldots,d\}$ and $[\psi(\gamma_i)]=\pi_i$ for every $1\le i\le n$.
\end{enumerate}
\end{proposition}
\begin{proof}
Assume we are given a branched covering $\map{f}{\tSigma}{\Sigma}$ with $\DD(f)=\datum{\tSigma,\Sigma}{d}{\pi_1,\ldots,\pi_n}$. Since surfaces are homogeneous, we can assume that the branching points are exactly $x_1,\ldots,x_n$, with associated partitions $\pi_1,\ldots,\pi_n$ respectively. Let $\map{\holed{f}}{\holed{\tSigma}}{\holed{\Sigma}}$ be the induced covering map, and let $\map{\Mon}{\pi_1(\holed{\Sigma},x_0)}{\op{\symgroup[d]}}$ be the monodromy homomorphism. By \cref{hurwitz:th:monodromy-permutation-matches-partition} we have $[\Mon(\gamma_i)]=\pi_i$ for every $1\le i\le n$, and the action of $\Mon(\pi_1(\holed{\Sigma},x_0))$ on $\{1,\ldots,d\}$ is transitive since $\holed{\tSigma}$ is connected. Therefore setting $\psi=\Mon$ gives the desired homomorphism.

Assume conversely that we are given a group homomorphism $\map{\psi}{\pi_1(\holed{\Sigma},x_0)}{\op{\symgroup[d]}}$. \Cref{hurwitz:th:covering-with-given-monodromy} gives a covering map $\map{\holed{f}}{\holed{\tSigma}}{\holed{\Sigma}}$ of degree $d$ with monodromy $\Mon=\psi$. The non-compact surface $\holed{\tSigma}$ is connected by the transitivity hypothesis. We can ``fill the holes'' in $\holed{\Sigma}$ and $\holed{\tSigma}$ to get a branched covering between compact surfaces; here are the details. Consider one of the points $x_i$, and fix an open neighborhood $U\subs\Sigma$ of $x_i$ homeomorphic to $\RR^2$. Now $(\holed{f})^{-1}(U\setminus\{x_i\})$ is a covering space of $U\setminus\{x_i\}\iso\RR^2\setminus\{0\}$. By the classification of covering spaces, we get that $(\holed{f})^{-1}(U\setminus\{x_i\})$ is a disjoint union of punctured disks $\wtilde{V}_1\sqcup\ldots\sqcup\wtilde{V}_r$; moreover, for each $1\le j\le r$ we have charts $\map{\phi_j}{U\setminus\{x_i\}}{\CC\setminus\{0\}}$, $\map{\wtilde{\phi}_j}{\wtilde{V}_j}{\CC\setminus\{0\}}$ and a positive integer $k_j$ such that the diagram
\begin{diagram}
\wtilde{V}_j\rar{\holed{f}}\dar{\wtilde{\phi}_j}&U\setminus\{x_i\}\dar{\phi_j}\\
\CC\setminus\{0\}\rar{F_{k_j}}&\CC\setminus\{0\}
\end{diagram}
commutes, where $F_{k_j}(z)=z^{k_j}$. We can ``fill the hole'' in $\wtilde{V}_j$ by considering the surface $\holed{\tSigma}_{\text{fill}}=\holed{\tSigma}\sqcup\CC/\sim$, where $y\sim \wtilde{\phi}_j(y)$ for each $y\in\wtilde{V}_j$. It is clear that $\holed{f}$ extends to a continuous function $\umap{\holed{\tSigma}_{\text{fill}}}{\Sigma}$ by sending $0\in\CC$ to $x_i$; this map is locally modeled on $\xi\mapsto \xi^{k_j}$ near $0$. If we ``fill the hole'' in $\wtilde{V}_j$ for $1\le j\le r$, and then repeat the process for each $x_i$, we end up with a surface $\tSigma$ and a map $\map{f}{\tSigma}{\Sigma}$. It is easy to see from the construction that $\tSigma$ is compact and connected, and that $f$ is a branched covering. Since the associated covering map is exactly $\map{\holed{f}}{\holed{\tSigma}}{\holed{\Sigma}}$, \cref{hurwitz:th:monodromy-permutation-matches-partition} implies that $\pi(x_i)$ matches $\Mon(\gamma_i)=\psi(\gamma_i)$, so $\pi(x_i)=\pi_i$.
\end{proof}

By combining \cref{hurwitz:th:monodromy-realizability-general} with the classification of surfaces, we obtain the following criteria for realizability.

\bgroup
\tikzset{loop around point/.pic={
\draw[black edge] (0,0) to[in=180,out=45,out looseness=.1] (.75,.02) to[out=0,in=180] (.9,.1) to[out=0,in=90] (1,0) node[above] {$a_{#1}$} to[out=-90,in=0] (.9,-.1) to[out=180,in=0] (.75,-0.02) to[out=180,in=-45,in looseness=.1] (0,0);
\filldraw[surf boundary,fill=white] (.9,0) circle(.05);
}}
\begin{corollary}\label{hurwitz:th:monodromy-realizability-orientable}
Let $\surf{g}$ be the connected sum of $g\ge 0$ tori, $d\ge 1$ an integer, $\pi_1,\ldots,\pi_n\in\Partitions{d}$ partitions of $d$. Then there exists a realizable combinatorial datum $\DD=\datum{\tSigma,\surf{g}}{d}{\pi_1,\ldots,\pi_n}$ if and only if there exist permutations $\alpha_1,\ldots,\alpha_n,\beta_1,\ldots,\beta_g,\gamma_1,\ldots,\gamma_g\in\symgroup[d]$ such that:
\begin{enumerate}
\item\label{hurwitz:it:monodomy-realizability-orientable-first} $[\alpha_i]=\pi_i$ for each $1\le i\le n$;
\item $[\beta_1,\gamma_1]\cdots[\beta_g,\gamma_g]\cdot\alpha_1\cdots\alpha_n=1$;
\item\label{hurwitz:it:monodomy-realizability-orientable-last} the subgroup $\angled{\alpha_1,\ldots,\alpha_n,\beta_1,\ldots,\beta_g,\gamma_1,\ldots,\gamma_g}\subgroup\symgroup[d]$ acts transitively on $\{1,\ldots,d\}$.
\end{enumerate}
In this case, $\tSigma$ is necessarily orientable.
\end{corollary}
\begin{proof}
Let $\holed{\surf{g}}$ be the non-compact surface obtained by removing $n$ points $x_1,\ldots,x_n$ from $\Sigma_g$. Fix a base-point $x_0\in\holed{\surf{g}}$. Once we observe that $\pi_1(\holed{\surf{g}},x_0)$ has a presentation
\[
\pi_1(\holed{\surf{g}},x_0)=\angled{a_1,\ldots,a_n,b_1,\ldots,b_g,c_1,\ldots,c_g\mid [b_1,c_1]\cdots[b_g,c_g]\cdot a_1\cdots a_n},
\]
where $a_i$ is a loop around $x_i$, the criterion follows immediately from \cref{hurwitz:th:monodromy-realizability-general}.
\begin{center}
\tikzsetnextfilename{monodromy-fundamental-group-orientable}
\begin{tikzpicture}[x={(2.5,0)},y={(0,2.5)},pics/commutator/.style n args={3}{code={
\tikzmath{\i0=#1;\i1=#1+1;\i2=#1+2;\i3=#1+3;\i4=#1+4;}
\begin{scope}[every path/.style={line width=\edgelinewidth}]
\draw[#2,postaction={decorate,decoration={markings,mark=at position.5 with {\arrow[xshift=3.3pt]{Stealth[]}}}}] (\i0) -- (\i1) node[midway,auto,colored label={#2},swap] {$b_{#3}$};
\draw[#2,postaction={decorate,decoration={markings,mark=at position.5 with {\arrow[xshift=3.3pt]{Stealth[]}}}}] (\i3) -- (\i2) node[midway,auto,colored label={#2}] {$b_{#3}$};
\draw[#2,postaction={decorate,decoration={markings,mark=at position.5 with {\arrow[xshift=6.6pt]{Stealth[] Stealth[]}}}}] (\i1) -- (\i2) node[midway,auto,colored label={#2},swap] {$c_{#3}$};
\draw[#2,postaction={decorate,decoration={markings,mark=at position.5 with {\arrow[xshift=6.6pt]{Stealth[] Stealth[]}}}}] (\i4) -- (\i3) node[midway,auto,colored label={#2}] {$c_{#3}$};
\end{scope}
}}]
\pgfsetlayers{main,graph vertex}
\begin{pgfonlayer}{graph vertex}
\foreach \i[evaluate=\i as \i using int(\i)] in {0,...,14} {
\fill ({(\i-4)*360/14}:1) coordinate (\i) circle(1pt);
}\end{pgfonlayer}
\fill[disk 1] (0) \foreach \i[evaluate=\i as \i using int(\i)] in {1,...,13} { -- (\i)} -- cycle;
%\node[below=4pt] at (0) {$x_0$};
\foreach \i/\j in {4/5,9/10} {\draw[surf boundary dashed] (\i) -- (\j);}
\pic{commutator={0}{red}{1}};
\pic{commutator={5}{teal}{i}};
\pic{commutator={10}{violet}{g}};
\pic[rotate=100] at (0) {loop around point=1};
\pic[rotate=50] at (0) {loop around point=n};
\foreach \a in {65,75,85} {\filldraw[surf boundary,fill=white] ($(0)+(\a:.9)$) circle (.02);}
\end{tikzpicture}
\end{center}
The orientability of $\tSigma$ was already addressed in \cref{hurwitz:rm:orientability-of-tsigma}.
\end{proof}

\begin{remark}\label{hurwitz:rm:sigma-tilde-unique-orientable}
Given $\surf{g}$, $d$ and $\pi_1,\ldots,\pi_n$, there is at most one surface $\tSigma$ such that $\DD=\datum{\tSigma,\surf{g}}{d}{\pi_1,\ldots,\pi_n}$ is a candidate datum. In fact, the \RH{} formula gives
\[
\chi(\tSigma)=d\chi(\surf{g})-v(\pi_1)-\ldots-v(\pi_n)
\]
which, in turn, uniquely determines the orientable surface $\tSigma$. As an application, assume that we have a candidate datum $\DD=\datum{\tSigma,\Sigma}{d}{\pi_1,\ldots,\pi_n}$, and we find permutations in $\symgroup[d]$ satisfying conditions \ref{hurwitz:it:monodomy-realizability-orientable-first}--\ref{hurwitz:it:monodomy-realizability-orientable-last} of \cref{hurwitz:th:monodromy-realizability-orientable}: this immediately implies that $\DD$ is realizable.
\end{remark}

Before stating the monodromy criterion for non-orientable surfaces, we recall a few basic facts about covering maps and orientability.

Given a non-orientable topological manifold $M$, let $\map{\omega}{\what{M}}{M}$ be its orientable double covering. Fix a base-point $x_0\in M$, and consider the monodromy homomorphism
\[
\map{w}{\pi_1(M,x_0)}{\symgroup(\omega^{-1}(x_0))\iso\ZZ/2}.
\]
We denote the kernel of $w$ (which is a subgroup of $\pi_1(M,x_0)$ of index $2$) by $W(M,x_0)$. Note that $W=\omega_\ast(\pi_1(\what{M},\what{x}_0))$ for every base-point $\what{x}_0\in\omega^{-1}(x_0)$, where $\map{\omega_\ast}{\pi_1(\what{M},\what{x}_0}{\pi_1(M,x_0)}$ denotes the map induced by $\omega$ on the fundamental groups. Given a connected topological manifold $N$ and a covering map $\map{f}{N}{M}$, elementary properties of covering spaces imply that the following are equivalent:
\begin{enumerate}
\item $N$ is orientable;
\item $f_\ast(\pi_1(N,y_0))\subgroup W(M,x_0)$ for every base-point $y_0\in f^{-1}(x_0)$;
\item there exists a covering map $\map{\what{f}}{N}{\what{M}}$ such that $f$ factors as $f=\omega\circ\what{f}$.
\end{enumerate}

\begin{corollary}\label{hurwitz:th:monodromy-realizability-non-orientable}
Let $\nosurf{g}$ be the connected sum of $g\ge 1$ projective planes, $d\ge 1$ an integer, $\pi_1,\ldots,\pi_n\in\Partitions{d}$ partitions of $d$. Then there exists a realizable combinatorial datum $\DD=\datum{\tSigma,\nosurf{g}}{d}{\pi_1,\ldots,\pi_n}$ if and only if there exist permutations $\alpha_1,\ldots,\alpha_n,\beta_1,\ldots,\beta_g\in\symgroup[d]$ such that:
\begin{enumerate}
\item $[\alpha_i]=\pi_i$ for each $1\le i\le n$;
\item $\beta_1^2\cdots\beta_g^2\cdot\alpha_1\cdots\alpha_n=1$;
\item the subgroup $\angled{\alpha_1,\ldots,\alpha_n,\beta_1,\ldots,\beta_g}\subgroup\symgroup[d]$ acts transitively on $\{1,\ldots,d\}$.
\end{enumerate}
In this case, $\tSigma$ is non-orientable if and only if there exists a permutation $\gamma\in\symgroup[d]$ which has a fixed point and can be written as the product of an odd number of $\beta_j$ and any number of $\alpha_i$.
\end{corollary}
\begin{proof}
The proof of the criterion is identical to that of \cref{hurwitz:th:monodromy-realizability-orientable}: simply let $\holed{\nosurf{g}}=\nosurf{g}\setminus\{x_1,\ldots,x_n\}$ and observe that there is a presentation
\[
\pi_1(\holed{\nosurf{g}},x_0)=\angled{a_1,\ldots,a_n,b_1,\ldots,b_g\mid b_1^2\cdots b_g^2\cdot a_1\cdots a_n},
\]
where $a_i$ is a loop around $x_i$.
\begin{center}
\tikzsetnextfilename{monodromy-fundamental-group-non-orientable}
\begin{tikzpicture}[x={(2.5,0)},y={(0,2.5)},pics/square/.style n args={3}{code={
\tikzmath{\i0=#1;\i1=#1+1;\i2=#1+2;}
\begin{scope}[every path/.style={line width=\edgelinewidth}]
\draw[#2,postaction={decorate,decoration={markings,mark=at position.5 with {\arrow[xshift=3.3pt]{Stealth[]}}}}] (\i0) -- (\i1) node[midway,auto,colored label={#2},swap] {$b_{#3}$};
\draw[#2,postaction={decorate,decoration={markings,mark=at position.5 with {\arrow[xshift=3.3pt]{Stealth[]}}}}] (\i1) -- (\i2) node[midway,auto,colored label={#2},swap] {$b_{#3}$};
\end{scope}
}}]
\pgfsetlayers{main,graph vertex}
\begin{pgfonlayer}{graph vertex}
\foreach \i[evaluate=\i as \i using int(\i)] in {0,...,8} {
\fill ({(\i-2)*360/8}:1) coordinate (\i) circle(1pt);
}\end{pgfonlayer}
\fill[disk 1] (0) \foreach \i[evaluate=\i as \i using int(\i)] in {1,...,7} { -- (\i)} -- cycle;
\foreach \i/\j in {2/3,5/6} {\draw[surf boundary dashed] (\i) -- (\j);}
\pic{square={0}{red}{1}};
\pic{square={3}{teal}{i}};
\pic{square={6}{violet}{g}};
\pic[rotate=115] at (0) {loop around point=1};
\pic[rotate=65] at (0) {loop around point=n};
\foreach \a in {100,90,80} {\filldraw[surf boundary,fill=white] ($(0)+(\a:.9)$) circle (.02);}
\end{tikzpicture}
\end{center}
As far as the orientability of $\tSigma$ is concerned, note that $w(a_1)=\ldots=w(a_n)=0$, while $w(b_1)=\ldots=w(b_g)=1$. Let $\map{\holed{f}}{\holed{\tSigma}}{\holed{\nosurf{g}}}$ be the covering map associated to the branched covering, and let $\map{\Mon}{\pi_1(\holed{\nosurf{g}},x_0)}{\symgroup[d]}$ be the monodromy homomorphism. Fix a base-point $\wtilde{x}_0\in f^{-1}(x_0)$; we have that $\holed{\tSigma}$ is orientable if and only if $f_\ast(\pi_1(\holed{\tSigma},\wtilde{x}_0))\subgroup W(\holed{\nosurf{g}},x_0)$. Since $f_\ast(\pi_1(\holed{\tSigma},\wtilde{x}_0))=\stab{\pi_1(\holed{\nosurf{g}},x_0)}{\wtilde{x}_0}$, it follows that $\holed{\tSigma}$ is non-orientable if and only if there exists a loop $c\in\pi_1(\holed{\nosurf{g}},x_0)$ such that $w(c)=1$ and $\wtilde{x}_0\mon c=\wtilde{x}_0$. By applying $\Mon$, we see that this is equivalent to the existence of a permutation $\gamma\in\symgroup[d]$ which has a fixed point and can be written as the product of an odd number of $\beta_j$ and an arbitrary number of $\alpha_i$; note that the exact fixed point does not matter, since the subgroup generated by the $\alpha_i$ and $\beta_j$ acts transitively on $\{1,\ldots,d\}$. Finally, observe that $\holed{\tSigma}$ is orientable if and only if $\tSigma$ is.
\end{proof}
\egroup

\begin{remark}\label{hurwitz:rm:sigma-tilde-unique-non-orientable}
Given $\nosurf{g}$, $d$ and $\pi_1,\ldots,\pi_n$, there are at most two surfaces $\tSigma$, one orientable and one non-orientable, such that $\DD=\datum{\tSigma,\nosurf{g}}{d}{\pi_1,\ldots,\pi_n}$ is a candidate datum: like in \cref{hurwitz:rm:sigma-tilde-unique-orientable}, the \RH{} formula fixes $\chi(\tSigma)$ which, together with orientability, uniquely determines the surface $\tSigma$.
\end{remark}

Moreover, we can show that realizability in the case where $\Sigma$ is non-orientable and $\tSigma$ is orientable can be reduced to a situation where both surfaces are orientable.

\begin{proposition}\label{hurwitz:th:monodromy-realizability-double-covering}
Let $\DD=\datum{\tSigma,\Sigma}{d}{\pi_1,\ldots\pi_n}$ be a combinatorial datum, with $\Sigma$ non-orientable and $\tSigma$ orientable. Then $\DD$ is realizable if and only if $d$ is even and there exist partitions $\pi'_1,\ldots,\pi'_n,\pi''_1,\ldots,\pi''_n\in\Partitions{d/2}$ with $\pi_i=\pi'_i\cup\pi''_i$ for each $1\le i\le n$, such that the combinatorial datum
\[
\DD'=\datum{\tSigma,\hSigma}{d/2}{\pi'_1,\ldots,\pi'_n,\pi''_i,\ldots,\pi''_n}
\]
is realizable, where $\hSigma$ is the orientable double covering of $\Sigma$.\todo{However, not every splitting leads to a realizable datum.}
\end{proposition}
\begin{proof}
Assume that $\DD$ is realized by a branched covering $\map{f}{\tSigma}{\Sigma}$. Let $\map{\holed{f}}{\holed{\tSigma}}{\holed{\Sigma}}$ be the associated covering map, and let $\map{\omega}{\hSigma}{\Sigma}$ be the orientable double covering. Define $\holed{\hSigma}=\omega^{-1}(\holed{\Sigma})$, and denote by $\holed{\omega}$ the restriction of $\omega$ to $\holed{\tSigma}$; clearly, $\map{\holed{\omega}}{\holed{\hSigma}}{\holed{\Sigma}}$ is the orientable double covering of $\holed{\Sigma}$. Since $\holed{\tSigma}$ is orientable while $\holed{\Sigma}$ is not, $\holed{f}$ factors as $\holed{f}=\holed{\what{f}}\circ\holed{\omega}$ for some covering map $\map{\holed{\what{f}}}{\holed{\tSigma}}{\holed{\hSigma}}$; in particular, $d$ is even and $\holed{\what{f}}$ has degree $d/2$. The conclusion follows from a routine topological argument; for the sake of completeness, we will now report the details. Fix a branching point $x\in\Sigma\setminus\holed{\Sigma}$; let $f^{-1}(x)=\{\wtilde{x}_1,\ldots,\wtilde{x}_r\}$ and $\omega^{-1}(x)=\{\what{x}_1,\what{x}_2\}$. There exists a small open neighborhood $U\subs\Sigma$ of $x$ homeomorphic to $\RR^2$ such that:
\begin{itemize}
\item $f^{-1}(U)=\wtilde{U}_1\sqcup\ldots\sqcup\wtilde{U}_r$, where $\wtilde{U}_i$ is a trivializing neighborhood of $\wtilde{x}_i$;
\item $\omega^{-1}(U)=\what{U}_1\sqcup\what{U}_2$, where $\what{U}_i$ is a trivializing neighborhood of $\what{x}_i$.
\end{itemize}
It is now clear that $\map{\holed{\what{f}}}{\holed{\tSigma}}{\holed{\hSigma}}$ extends to a branched covering $\map{\what{f}}{\tSigma}{\hSigma}$: for each $1\le i\le r$, we simply set $\what{f}(\wtilde{x}_i)=\what{x}_1$ if $\holed{\what{f}}(\wtilde{U}_i\setminus\{\wtilde{x}_i\})=\what{U}_1\setminus\{\what{x}_1\}$, and $\what{f}(\wtilde{x}_i)=\what{x}_2$ otherwise; obviously, we must repeat this process for every branching point $x$. The branched covering $\what{f}$ has degree $d/2$; moreover, it is easy to see from the construction that $\pi_{f}(x)=\pi_{\what{f}}(\what{x}_1)\cup\pi_{\what{f}}(\what{x}_2)$ (we use the subscript in order to clarify which branched covering we are referring to). Therefore the realizable combinatorial datum $\DD(\what{f})$ has the required form.

Conversely, assume that $d$ is even and we are given a branched covering $\map{\what{f}}{\tSigma}{\hSigma}$ with branching datum
\[
\DD(\what{f})=\datum{\tSigma,\hSigma}{d/2}{\pi_1',\ldots,\pi_n',\pi_1'',\ldots,\pi_n''},
\]
where $\pi_i=\pi_i'\cup\pi_i''$ for every $1\le i\le n$. Let $x_1',\ldots,x_n',x_1'',\ldots,x_n''\in\hSigma$ be the branching points corresponding to the similarly named partitions of $\DD(\what{f})$. Since surfaces are homogeneous, we can assume that $\omega(x_i')=\omega(x_i'')$ for each $1\le i\le n$, where $\map{\omega}{\hSigma}{\Sigma}$ is the covering map. It is now easy to see that
\[
\DD(\omega\circ\what{f})=\datum{\tSigma,\Sigma}{d}{\pi_1'\cup\pi_1'',\ldots,\pi_n'\cup\pi_n''}.\qedhere
\]
\end{proof}

We conclude this introductory chapter by showing that the four conditions described in \cref{hurwitz:df:candidate-datum} are actually necessary for a combinatorial datum to be realizable.

\begin{proposition}\label{hurwitz:th:candidate-datum-necessary-conditions}
Let $\map{f}{\tSigma}{\Sigma}$ be a branched covering. Then its branching datum $\DD(f)$ is a candidate datum.
\end{proposition}
\begin{proof}
Conditions \ref{hurwitz:it:candidate-datum-def:1} and \ref{hurwitz:it:candidate-datum-def:3} of \cref{hurwitz:df:candidate-datum} were already addressed, respectively, in \cref{hurwitz:th:riemann-hurwitz-formula} and \cref{hurwitz:rm:orientability-of-tsigma}. Condition \ref{hurwitz:it:candidate-datum-def:4} follows immediately from \cref{hurwitz:th:monodromy-realizability-double-covering}, so we only have to show that the total branching number $v(\pi_1)+\ldots+v(\pi_n)$ is even. Using the notations of \cref{hurwitz:th:monodromy-realizability-orientable,hurwitz:th:monodromy-realizability-non-orientable}, by \cref{hurwitz:th:branching-number-permutations-product} we have that
\[
v(\alpha_1\cdots\alpha_n)\equiv
\begin{dcases*}
v([\beta_1,\gamma_1]\cdots[\beta_g,\gamma_g])&if $\Sigma$ is orientable,\\
v(\beta_1^2\cdots\beta_g^2)&if $\Sigma$ is non-orientable
\end{dcases*}
\pmod{2}.
\]
But commutators and squares are even permutations, therefore
\[
v(\pi_1)+\ldots+v(\pi_n)=v(\alpha_1)+\ldots v(\alpha_n)\equiv v(\alpha_1\cdots\alpha_n)\equiv 0\pmod{2}.\qedhere
\]
\end{proof}
